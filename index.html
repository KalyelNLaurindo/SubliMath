<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SubliMath - Calculadora</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/favicon.png" />

  <!-- Bootstrap CSS (CDN) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />

  <!-- Estilo Customizado -->
  <link rel="stylesheet" href="CSS/style.css" />

  <!-- Manifest PWA -->
  <link rel="manifest" href="manifest.json" />
</head>
<body class="bg-light">
  <div class="container text-center mt-5">
    <h1 class="mb-4">SubliMath</h1>

    <!-- Visor da Calculadora -->
    <div class="calculator mx-auto" style="max-width: 340px;">
      <input
        type="text"
        id="display"
        class="form-control text-end mb-3"
        aria-label="Visor da Calculadora"
        disabled
      />

      <!-- Linha de botões: Funções gerais -->
      <div class="row g-2 mb-2">
        <div class="col">
          <button
            class="btn btn-secondary w-100"
            onclick="clearDisplay()"
            aria-label="Limpar tudo"
          >
            AC
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-secondary w-100"
            onclick="backspace()"
            aria-label="Backspace"
          >
            ⌫
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-secondary w-100"
            onclick="appendToDisplay('%')"
            aria-label="Operador porcentagem"
          >
            %
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-warning w-100"
            onclick="appendToDisplay('/')"
            aria-label="Operador divisão"
          >
            ÷
          </button>
        </div>
      </div>

      <!-- Linha de botões: Numerais e operadores básicos -->
      <div class="row g-2 mb-2">
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('7')"
            aria-label="7"
          >
            7
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('8')"
            aria-label="8"
          >
            8
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('9')"
            aria-label="9"
          >
            9
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-warning w-100"
            onclick="appendToDisplay('*')"
            aria-label="Operador multiplicação"
          >
            ×
          </button>
        </div>
      </div>
      <div class="row g-2 mb-2">
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('4')"
            aria-label="4"
          >
            4
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('5')"
            aria-label="5"
          >
            5
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('6')"
            aria-label="6"
          >
            6
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-warning w-100"
            onclick="appendToDisplay('-')"
            aria-label="Operador subtração"
          >
            −
          </button>
        </div>
      </div>
      <div class="row g-2 mb-2">
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('1')"
            aria-label="1"
          >
            1
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('2')"
            aria-label="2"
          >
            2
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('3')"
            aria-label="3"
          >
            3
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-warning w-100"
            onclick="appendToDisplay('+')"
            aria-label="Operador soma"
          >
            +
          </button>
        </div>
      </div>
      <div class="row g-2 mb-3">
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('0')"
            aria-label="0"
          >
            0
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('.')"
            aria-label="Ponto decimal"
          >
            .
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-light w-100"
            onclick="appendToDisplay('Ans')"
            aria-label="Última resposta"
          >
            Ans
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-success w-100"
            onclick="calculateResult()"
            aria-label="Calcular resultado"
          >
            =
          </button>
        </div>
      </div>

      <!-- Linha de botões: Funções avançadas e toggle Deg/Rad -->
      <div class="row g-2">
        <div class="col">
          <button
            class="btn btn-dark w-100"
            id="toggleDegRad"
            onclick="toggleDegrees()"
            aria-label="Alternar entre graus e radianos"
          >
            Deg
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('sin(')"
            aria-label="Função seno"
          >
            sin
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('cos(')"
            aria-label="Função cosseno"
          >
            cos
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('tan(')"
            aria-label="Função tangente"
          >
            tan
          </button>
        </div>
      </div>
      <div class="row g-2 mt-2">
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('√(')"
            aria-label="Raiz quadrada"
          >
            √
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('^')"
            aria-label="Exponenciação"
          >
            ^
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('log(')"
            aria-label="Logaritmo base 10"
          >
            log
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('ln(')"
            aria-label="Logaritmo natural"
          >
            ln
          </button>
        </div>
      </div>
      <div class="row g-2 mt-2">
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('π')"
            aria-label="Pi"
          >
            π
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('e')"
            aria-label="Constante e"
          >
            e
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('!')"
            aria-label="Fatorial"
          >
            !
          </button>
        </div>
        <div class="col">
          <button
            class="btn btn-dark w-100"
            onclick="appendToDisplay('asin(')"
            aria-label="Arco seno"
          >
            asin
          </button>
        </div>
      </div>
      <!-- Fim dos botões -->
    </div>
  </div>

  <!-- Bootstrap Bundle (JS + Popper) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>

  <!-- Scripts da Calculadora (importantes na ordem) -->
  <script src="js/calculator.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/ui.js"></script>

  <!-- Service Worker para PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker
        .register('service-worker.js')
        .then(() => console.log('Service Worker registrado com sucesso!'))
        .catch((err) =>
          console.error('Erro ao registrar Service Worker:', err)
        );
    }
  </script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker
        .register('service-worker.js')
        .then(() => console.log('Service Worker registrado!'))
        .catch(err => console.error('Erro ao registrar SW:', err));
    }
    </script>    
</body>
</html>
